name: PR check

on:
  pull_request:
    branches: [master]

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@34e114876b0b11c390a56381ad16ebd13914f8d5 # v4
      - uses: azure/setup-helm@1a275c3b69536ee54be43f2070a358922e12c8d4 # v4
      - run: |
          for chart in charts/*/; do
            helm dependency build "$chart" 2>/dev/null || true
            helm lint "$chart"
            helm template test "$chart"
          done
